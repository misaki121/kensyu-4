# 支出記録アプリ（Expense Tracker）仕様書

## 1. 概要
日々の支出を簡単に記録・管理できるWebアプリケーションです。ブラウザのローカルストレージを使用してデータを保存するため、サーバー設定なしですぐに利用可能です。

## 2. 目的
- ユーザーが自身の支出を可視化し、節約や予算管理に役立てる。
- HTML/CSS/JavaScriptの基礎的なDOM操作とデータ永続化（localStorage）の技術習得。

## 3. 画面構成
シングルページアプリケーション（SPA）として構成します。

### メイン画面
1.  **左カラム：入力エリア**
    - **ヘッダー**: アプリケーションタイトル
    - **入力フォーム**:
        - 日付（自動設定：操作日）
        - 項目名入力（テキストボックス）
        - 金額入力（数値入力）
        - カテゴリ選択（プルダウン形式 `<select>`）
            - 食費 (Food)
            - 交通費 (Transport)
            - 日用品 (Daily Necessities)
            - エンタメ (Entertainment)
            - その他 (Others)
        - 「登録」ボタン

2.  **右カラム：可視化・履歴エリア**
    - **フィルタリングエリア**:
        - **表示モード切替**: 「年別」/「月別」の切り替え
        - **年選択**: プルダウンで年を選択（データが存在する年 + 現在年）
        - **月選択**: プルダウンで月（1月〜12月）を選択（月別モード時のみ有効）
    - **円グラフエリア**: カテゴリ別の支出割合を可視化（フィルタリング期間に対応）
    - **集計エリア**: 支出の合計金額表示（フィルタリング期間に対応）
    - **支出リストエリア**:
        - 登録された支出の一覧表示（フィルタリング期間に対応）
        - 各行に「削除」ボタン

## 4. 入出力仕様

### 入力
- **日付**: 自動設定（操作日）。YYYY-MM-DD形式。
- **項目名**: 必須。文字列。
- **金額**: 必須。数値（0以上）。
- **カテゴリ**: 必須。プルダウンから選択。

### 出力
- **支出一覧**: 保存されたデータを日付順（または登録順）に表示。
- **合計金額**: 現在表示されている支出の総額を計算して表示。

## 5. 機能一覧
1.  **支出登録機能**
    - フォームに入力されたデータをバリデーションチェックし、保存する。
    - 入力後はフォームをクリアする。
2.  **支出表示機能**
    - 保存されたデータを読み込み、リストとして画面に描画する。
3.  **支出削除機能**
    - リスト内の特定の項目を削除し、ストレージからも削除する。
4.  **データ永続化機能**
    - `localStorage` を使用して、ブラウザを閉じてもデータが消えないようにする。
5.  **合計計算機能**
    - 登録データの合計金額をリアルタイム（または登録/削除時）に更新表示する。
6.  **グラフ可視化機能**
    - 登録された支出データをカテゴリ別に集計し、円グラフで割合を表示する。
    - データ更新時にグラフもリアルタイムで更新する。
7.  **期間フィルタリング機能**
    - **年別表示**: 指定した年のデータを集計・表示する。
    - **月別表示**: 指定した年月のデータを集計・表示する。
    - フィルタリングは「合計金額」「円グラフ」「支出リスト」全てに適用される。

## 6. 使用技術
- **HTML5**: セマンティックなマークアップ。
- **CSS3**: モダンなレイアウト（Flexbox/Grid）、レスポンシブ対応（必要に応じて）。
- **JavaScript (Vanilla JS)**: フレームワークなし。ES6+記法を使用。

## 7. データ構造（localStorage）
データは `Expense` オブジェクトの配列としてJSON形式で `localStorage` に保存します。

- **Key**: `expenseData`
- **Value**: `Expense[]` (JSON string)

### Expense Object Definition
| Property | Type | Description | Example |
| :--- | :--- | :--- | :--- |
| `id` | `string` | 一意の識別子 (UUID or Timestamp) | `"1698384000000"` |
| `date` | `string` | 日付 (YYYY-MM-DD) | `"2023-10-27"` |
| `item` | `string` | 項目名 | `"ランチ"` |
| `amount` | `number` | 金額 | `1200` |
| `category` | `string` | カテゴリ | `"food"` |

```javascript
// Example Data Structure in JavaScript
const expenseData = [
  {
    id: "1700000000001",
    date: "2023-11-24",
    item: "スーパーで買い物",
    amount: 3500,
    category: "daily"
  },
  {
    id: "1700000000002",
    date: "2023-11-25",
    item: "電車代",
    amount: 500,
    category: "transport"
  }
];
```
